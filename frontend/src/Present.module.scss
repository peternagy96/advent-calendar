$colorBody: darken(#83AF9B, 45%);
$colorBow: #83AF9B;
$colorPresent: #FE4365;
$colorRibbon: #F9CDAD;
$sizeRibbon: 2vw;

$colorSantaFace: #E1B899;
$colorSantaEye: #111111;
$colorSantaSmile: $colorSantaEye;
$colorSantaHat: darken($colorPresent, 10%);

@mixin presentColors($direction: 45deg) {
  background-color: $colorPresent;
  background-image: repeating-linear-gradient(
    $direction,
    darken($colorPresent, 4%),
    darken($colorPresent, 4%) 1px,
    $colorPresent 1px,
    $colorPresent 4px
  );
}

// Present
.present {
  user-select: none;
  position: relative;
  min-width: 0;
  min-height: 0;
  max-width: 100%;
  max-height: 100%;
  width: 90%;
  aspect-ratio: 1 / 1.5;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  &.clicked {
    .santa {
      opacity: 1;
      transform: translateY(-90%);
    }
    .present__top {
      transform: translateY(-105%);
    }
  }
  &.active {
    &:hover {
      .santa {
        opacity: 1;
        transform: translateY(-90%);
        animation: pop-up 0.4s ease-in;
        transition: opacity 0s;
      }
      .present__top {
        transform: translateY(-105%);
        animation: pop-the-top 0.4s ease-in;
      }
    }
  }
  &.inactive {
    &:hover {
      animation: shake 2s ease-in-out infinite;
    }
  }
  
  .present__box {
    @include presentColors;
    position: relative;
    width: 98%;
    height: 50%;
    border-radius: 0 0 0.5vw 0.5vw;
    box-shadow: inset -6px -6px 36px rgba(black, 0.1);
    .present__ribbon__vertical {
      height: 100%;
    }
  }

  .present__ribbon__horizontal,
  .present__ribbon__vertical {
    content: "";
    position: absolute;
    margin: auto;
    background-color: $colorRibbon;
  }

  .present__ribbon__vertical {
    content: "";
    position: absolute;
    bottom: 0; 
    right: 0; 
    left: 0;
    margin: auto;
    width: $sizeRibbon;
    background-color: $colorRibbon;
    background-image: linear-gradient(80deg, transparent, rgba(white, 0.2) 70%, transparent);
    box-shadow:
      inset 0 -4px 6px -2px rgba(black, 0.1),
      4px 0 6px -2px rgba(black, 0.1);
  }

  .present__ribbon__horizontal {
    right: 0;
    left: 0;
    bottom: 50%;
    width: 100%;
    height: $sizeRibbon;
    background-image: linear-gradient(80deg, transparent, rgba(white, 0.3) 60%, transparent);
    box-shadow: 0 0 8px -2px rgba(black, 0.1);
  }

  .present__top {
    @include presentColors(-45deg);
    height: 15%;
    width: 100%;
    border-radius: 0.5vw 0.5vw 0 0;
    box-shadow: inset -6px -6px 36px rgba(black, 0.1);
    transform: translateY(5%);
    position: relative;
    .present__ribbon__vertical {
      height: 100%;
    }
  }

  .present__bow {
    position: absolute;
    right: 0; bottom: 100%; left: 0;
    margin: auto;
    width: 30%;
    height: 40%;
    background-color: $colorBow;
    border-radius: 2px 2px 0 0;
    box-shadow: inset -6px -6px 6px rgba(black, 0.1);

    &:before,
    &:after {
      content: "";
      position: absolute;
      bottom: 100%;
      width: 70%;
      height: 150%;
      background-color: inherit;
      border-radius: 2px;
      z-index: -1;
    }

    &:before {
      left: 0;
      transform: rotate(45deg);
      box-shadow: inset 6px 6px 6px rgba(black, 0.1);
    }

    &:after {
      right: 0;
      transform: rotate(-45deg);
      box-shadow: inset -6px -6px 6px rgba(black, 0.1);
    }
  }

  .present__number {
    position: absolute;
    bottom: 10px;
    right: 20px;
    font-size: 5vh;
    font-weight: 800;
    color: $colorRibbon;
  }

  .santa {
    --skin: #fca;
    --beard: #eee;
    --eyes: #630a;
    --cheeks: #f001;
    --belt: #111;
    --belt-buckle: gold;
    --suit: #a00;
    div {
      position: absolute;
      box-sizing: border-box;
    }
    position: absolute;
    bottom: 0;
    margin: auto;
    width: 60%;
    aspect-ratio: 1/1;

    .r {
      border-radius: 100%;
    }
    
    .hb::before,
    .ha::after {
      content: "";
      display: block;
      position: absolute;
      box-sizing: border-box;
    }

    .head {
      height: 50%;
      aspect-ratio: 1/1;
      background: var(--skin);
      top: 20%;
      left: 50%;
      transform: translate(-50%, 0);
    }

    .beard {
      width: 60%;
      aspect-ratio: 1/1.2;
      background: var(--beard);
      top: 20%;
      left: 50%;
      transform: translate(-50%, 0);
      border-radius: 100% / 120% 120% 80% 80%;
    }
    
    .mustache {
      width: 15%;
      height: 15%;
      background: #fff;
      border-radius: 100% 20% 100% 0;
      top: 62%;
      left: 50%;
      transform-origin: top right;
      transform: translate(-100%, 0) rotate(25deg);
    }
    
    .mustache + .mustache {
      left: 49%;
      border-radius: 20% 100% 0 100%;
      transform-origin: top left;
      transform: rotate(-25deg);
    }

    .eye {
      width: 5%;
      height: 5%;
      background: var(--eyes);
      top: 40%;
      &.eye__left {
        left: 38%;
      }
      &.eye__right {
        left: 58%;

      }
    }

    .cheek {
      width: 10%;
      height: 6%;
      background: var(--cheeks);
      top: 45%;
      &.cheek__left {
        left: 35%;
      }
      &.cheek__right {
        left: 55%;
      }
    }

    .hat {
      width: 45%;
      height: 27%;
      background: var(--suit);
      border-radius: 100% 20% 0 0;
      top: 2%;
      left: 50%;
      transform: translate(-50%, 0) rotate(1deg);
    }
    
    .hat::before {
      width: 110%;
      height: 40%;
      border-radius: 100% / 50%;
      bottom: -17%;
      left: -5%;
      box-shadow: inset 0 4vmin white;
      transform: rotate(-2deg);
    }
    
    .hat::after {
      width: 30%;
      aspect-ratio: 1/1;
      border-radius: 50%;
      background: var(--beard);
      right: -20%;
      top: -15%;
    }

    &:after {
      content: "";
      display: block;
      padding-bottom: 100%;
    }

  }
}

// Animation keyframes
@keyframes pop-the-top {
  0%  { transform: translateY(5%); }
  30% { transform: translateY(-110%); }
  50% { transform: translateY(-130%); }
  70% { transform: translateY(-90%); }
  90%, 100% { transform: translateY(-105%); }
}

@keyframes pop-up {
  0%  { transform: translateY(0%); }
  30%, 100% { transform: translateY(-90%); }
}

@keyframes shake {
  30% { transform: translateX(-0.2vw); }
  35% { transform: translateX(0.2vw); }
  40% { transform: translateX(-0.5vw); }
  45% { transform: translateX(0.5vw); }
  50% { transform: translateX(-0.2vw); }
  55% { transform: translateX(0.2vw); }
  60% { transform: translateX(0); }
}